/******************************************************************************
 * File Name: main.c
 * Description: Student database appliaction
 * Author: Ehab Mohamed Abdelhamed
 ******************************************************************************/
#include "Platform_Types.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//Structure for information of student
typedef struct{
	char name[40];
	uint32 id;
	float32 height;
}SData_t;

typedef struct{
	SData_t student;
	struct Node* PNextStudent;
}Sstudent_t;

typedef enum {
	MNUE,ADD_STUDENT,DELETE_STUEDENT,DISPLAY_STUDENTS
}EStutes_t;

Sstudent_t* g_PHeadofStudents=NULL;
EStutes_t stutes=MNUE;

void FillDataOfStudent(SData_t* newStudent){
	//Get all information of student
	printf("\n===== Enter information of student =====\n");
	printf("Enter student full Name: ");
	gets(newStudent->name);
	printf("Enter student ID: ");
	scanf("%d",&(newStudent->id));
	printf("Enter student height: ");
	scanf("%f",&(newStudent->height));
	printf("========================================\n");
}

Sstudent_t* GetStuedentFromId(uint32 ID){
	Sstudent_t* ReqStudent=g_PHeadofStudents;
	//loop until reach to the required id
	while(ReqStudent!=NULL){
		if(ReqStudent->student.id==ID){
			break;
		}
		ReqStudent=ReqStudent->PNextStudent;
	}
	//if id not exist return NULL
	return ReqStudent;
}

void AddStudent(){
	//Create New record
	Sstudent_t* newStudent=(Sstudent_t*)malloc(sizeof(Sstudent_t));
	//Create pointer for using to reach to last student
	Sstudent_t* lastStudent=g_PHeadofStudents;
	//if success dynamic allocation fill the new record
	if(newStudent!=NULL){
		FillDataOfStudent(newStudent);
		newStudent->PNextStudent=NULL;
	}
	//Check if list if empty
	if(g_PHeadofStudents==NULL){
		g_PHeadofStudents=newStudent;
		newStudent->PNextStudent=NULL;
		//if list not empty
	}else{
		//loop until reach to last student
		while(lastStudent->PNextStudent!=NULL){
			lastStudent=lastStudent->PNextStudent;
		}
		//assign new record to the next of last student
		lastStudent->PNextStudent=newStudent;
	}
}

void deleteStudent(){
	uint32 deleteStudentid=0;
	Sstudent_t* deleteStudent=NULL;
	Sstudent_t previousStudents=g_PHeadofStudents;
	//Get the id of student that will be deleted from list
	printf("\n===== Delete student =======n");
	printf("Enter student ID: ");
	scanf("%d",&(deleteStudentid));
	//check if the list is empty
	if(g_PHeadofStudents==NULL){
		printf("THE LIST IS EMPTY\n");
	}else{
		//if the id not exist the function return NULL
		deleteStudent=GetStuedentFromId(deleteStudentid);
		//delete the required student from list
		if(deleteStudent==NULL){ //check if id not exist
			printf("THE ENTERD ID NOT EXIST!\n");
		}else{
			//check if the required student is first record
			if(deleteStudent==g_PHeadofStudents){
				g_PHeadofStudents=deleteStudent->PNextStudent;
			}else{
				//loop until reach to the record that previous of the required student
				while(previousStudents->PNextStudent!=deleteStudent){
					previousStudents=previousStudents->PNextStudent;
				}
				//assign that precedes of the required student to the next point of previous
				previousStudents=deleteStudent->PNextStudent;
			}
			//delete the required student
			free(deleteStudent);
			printf("The deleted student ----- Done\n");
			printf("==============================\n");
		}
	}
}

void Print_Students(){
	Sstudent_t student=g_PHeadofStudents;
	uint32 count=0;
	printf("\n\n==================================\n");
	if(student==NULL){
		printf("THE LIST IS EMPTY\n");
	}else{
		while(student!=NULL){
			count++;
			printf("The student record %d :\n",count);
			printf("Name  : %s\n",student->student.name);
			printf("ID    : %d\n",student->student.id);
			printf("Height: %f\n",student->student.height);
			student=student->PNextStudent;
		}
	}
	printf("\====================================\n");
}

/* Main Function */
int main(void){
	AddStudent();
	Print_Students();

	while(1){
		switch(stutes){
		case MNUE:

			break;
		case ADD_STUDENT:

			break;
		case DELETE_STUEDENT:

			break;
		case DISPLAY_STUDENTS:

			break;
		default:
			//No thing
		}
	}

	return 0;
}
