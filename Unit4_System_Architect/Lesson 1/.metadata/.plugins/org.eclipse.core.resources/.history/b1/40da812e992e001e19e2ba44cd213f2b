/******************************************************************************
 * File Name: main.c
 * Description: Application for using FIFO data structure
 * Author: Ehab Mohamed Abdelhamed
 ******************************************************************************/
#include "Platform_Types.h"
#include <stdio.h>
#include <string.h>
#include "fifo.h"

#define BUFFER_1_SIZE	5

ELEMENT_TYPE buffer1[BUFFER_1_SIZE];

/* Main Function */
int main(void){
	ELEMENT_TYPE data=0;
	FIFO_Buf_t UART_buf;
	FIFO_init(&UART_buf, buffer1,  BUFFER_1_SIZE);
	uint32 i=0;
	/*uint8 *string=(uint8*)"Ehab Abdelhamed";
	printf("UART_Fifo_Buffer get : ");
	//send the large number of characters using small size buffer
	while(string[i]!='\0'){
		//push characters until the buffer is full or to end of string
		for(;string[i]!='\0'&&FIFO_add_item(&UART_buf,string[i]) == FIFO_NO_ERROR;i++);
		//get characters until the buffer is empty
		while(FIFO_get_item(&UART_buf,&data) == FIFO_NO_ERROR){
			printf("%c",data);
		}
	}
	*/
	FIFO_add_item(&UART_buf,'m');
	FIFO_add_item(&UART_buf,'o');
	FIFO_add_item(&UART_buf,'h');
	FIFO_add_item(&UART_buf,'a');
	FIFO_add_item(&UART_buf,'m');
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_add_item(&UART_buf,&('e'));
	FIFO_add_item(&UART_buf,&'d');
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	FIFO_get_item(&UART_buf,&data);
	printf("%c",data);
	return 0;
}
